# ==========================================================================
# canVODpy Documentation - Zensical Configuration
# ==========================================================================
#
# Centralized documentation site for the canVODpy monorepo.
# Serve locally with: just docs
# Build with:         just docs-build
#
# Root-level files (CONTRIBUTING.md, VERSIONING.md, RELEASING.md) are
# copied into docs/ so zensical can serve them from the default docs_dir.
# Keep them in sync: cp CONTRIBUTING.md VERSIONING.md RELEASING.md docs/
#
# ==========================================================================

[project]
site_name = "canVODpy"
site_description = "GNSS Transmissometry (GNSS-T) analysis framework for Python"
site_author = "Nicolas Bader"
site_url = "https://nfb2021.github.io/canvodpy/"
copyright = "Copyright &copy; 2026 Nicolas Bader, TU Wien"

repo_url = "https://github.com/nfb2021/canvodpy"
repo_name = "nfb2021/canvodpy"
edit_uri = "edit/main/docs/"

extra_css = ["assets/canvod-nordic.css"]
extra_javascript = [
  "https://unpkg.com/beautiful-mermaid/dist/beautiful-mermaid.browser.global.js",
  "assets/mermaid-init.js",
]

# --------------------------------------------------------------------------
# Navigation
# --------------------------------------------------------------------------
# Paths are relative to docs_dir (default: "docs/").
nav = [
  { "Home" = "index.md" },

  { "Architecture" = [
    { "Monorepo Structure" = "architecture.md" },
    { "Namespace Packages" = "namespace-packages.md" },
    { "Package Dependencies" = "dependencies.md" },
  ]},

  { "Packages" = [
    { "canvod-readers" = [
      { "Overview" = "packages/readers/overview.md" },
      { "RINEX v3.04 Format" = "packages/readers/rinex-format.md" },
      { "Reader Architecture" = "packages/readers/architecture.md" },
      { "Extending Readers" = "packages/readers/extending.md" },
    ]},
    { "canvod-auxiliary" = [
      { "Overview" = "packages/auxiliary/overview.md" },
      { "Preprocessing Pipeline" = "packages/auxiliary/preprocessing.md" },
      { "Interpolation Methods" = "packages/auxiliary/interpolation.md" },
      { "Coordinate Systems" = "packages/auxiliary/coordinates.md" },
      { "Product Registry" = "packages/auxiliary/products.md" },
    ]},
    { "canvod-grids" = [
      { "Overview" = "packages/grids/overview.md" },
    ]},
    { "canvod-vod" = [
      { "Overview" = "packages/vod/overview.md" },
    ]},
    { "canvod-store" = [
      { "Overview" = "packages/store/overview.md" },
      { "Icechunk Storage" = "packages/store/icechunk.md" },
      { "Storage Strategies" = "packages/store/storage-strategies.md" },
    ]},
    { "canvod-viz" = [
      { "Overview" = "packages/viz/overview.md" },
    ]},
    { "canvod-utils" = [
      { "Overview" = "packages/utils/overview.md" },
    ]},
  ]},

  { "Development" = [
    { "Contributing" = "CONTRIBUTING.md" },
    { "Development Guide" = "guides/development.md" },
    { "Architecture & Design Patterns" = "guides/architecture-design.md" },
    { "Build System" = "build-system.md" },
    { "Tooling" = "tooling.md" },
  ]},

  { "Release & Publishing" = [
    { "Versioning" = "VERSIONING.md" },
    { "Release Process" = "RELEASING.md" },
    { "PyPI Setup" = "guides/PYPI_SETUP.md" },
    { "Zenodo DOI" = "guides/ZENODO_SETUP.md" },
    { "OIDC Authentication" = "guides/OIDC_EXPLAINED.md" },
    { "Release Internals" = "guides/HOW_RELEASE_WORKS.md" },
  ]},

  { "API Reference" = [
    { "canvodpy" = "api/canvodpy.md" },
    { "canvod.readers" = "api/canvod-readers.md" },
    { "canvod.auxiliary" = "api/canvod-auxiliary.md" },
    { "canvod.grids" = "api/canvod-grids.md" },
    { "canvod.vod" = "api/canvod-vod.md" },
    { "canvod.store" = "api/canvod-store.md" },
    { "canvod.viz" = "api/canvod-viz.md" },
    { "canvod.utils" = "api/canvod-utils.md" },
  ]},
]

# --------------------------------------------------------------------------
# Plugins
# --------------------------------------------------------------------------
[project.plugins.mkdocstrings.handlers.python]
[project.plugins.mkdocstrings.handlers.python.options]
docstring_style = "google"
show_source = true
show_bases = true
members_order = "source"

# --------------------------------------------------------------------------
# Markdown extensions
# --------------------------------------------------------------------------
# When customising ANY extension, ALL desired extensions must be listed
# because zensical replaces defaults rather than merging.
[project.markdown_extensions.abbr]
[project.markdown_extensions.admonition]
[project.markdown_extensions.attr_list]
[project.markdown_extensions.def_list]
[project.markdown_extensions.footnotes]
[project.markdown_extensions.md_in_html]
[project.markdown_extensions.toc]
permalink = true
[project.markdown_extensions.pymdownx.arithmatex]
generic = true
[project.markdown_extensions.pymdownx.betterem]
smart_enable = "all"
[project.markdown_extensions.pymdownx.caret]
[project.markdown_extensions.pymdownx.details]
[project.markdown_extensions.pymdownx.emoji]
emoji_generator = "zensical.extensions.emoji.to_svg"
emoji_index = "zensical.extensions.emoji.twemoji"
[project.markdown_extensions.pymdownx.highlight]
[project.markdown_extensions.pymdownx.inlinehilite]
[project.markdown_extensions.pymdownx.keys]
[project.markdown_extensions.pymdownx.mark]
[project.markdown_extensions.pymdownx.smartsymbols]
[project.markdown_extensions.pymdownx.superfences]
custom_fences = [
  { name = "mermaid", class = "mermaid", format = "pymdownx.superfences.fence_code_format" },
]
[project.markdown_extensions.pymdownx.tabbed]
alternate_style = true
[project.markdown_extensions.pymdownx.tasklist]
custom_checkbox = true
[project.markdown_extensions.pymdownx.tilde]

# --------------------------------------------------------------------------
# Theme
# --------------------------------------------------------------------------
[project.theme]
language = "en"
logo = "assets/logo.svg"
favicon = "assets/logo.svg"

features = [
  "content.code.copy",
  "content.code.annotate",
  "navigation.footer",
  "navigation.indexes",
  "navigation.instant",
  "navigation.instant.prefetch",
  "navigation.path",
  "navigation.sections",
  "navigation.tabs",
  "navigation.top",
  "navigation.tracking",
  "search.highlight",
]

[project.theme.icon]
repo = "fontawesome/brands/github"

[[project.theme.palette]]
scheme = "default"
toggle.icon = "lucide/sun"
toggle.name = "Switch to dark mode"

[[project.theme.palette]]
scheme = "slate"
toggle.icon = "lucide/moon"
toggle.name = "Switch to light mode"

# --------------------------------------------------------------------------
# Social links (footer)
# --------------------------------------------------------------------------
[[project.extra.social]]
icon = "fontawesome/brands/github"
link = "https://github.com/nfb2021/canvodpy"

[[project.extra.social]]
icon = "fontawesome/brands/python"
link = "https://pypi.org/project/canvodpy/"
