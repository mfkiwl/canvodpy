flowchart TD
    subgraph FIELD[Field]
        C1["Canopy 1"]
        C2["Canopy 2"]
        R1["Reference"]
    end

    subgraph SCS[SCS Expansion]
        C1P["C1 position"]
        C2P["C2 position"]
        R1C1["Ref @ C1"]
        R1C2["Ref @ C2"]
    end

    subgraph GROUPS[Store Groups]
        G1["canopy_01"]
        G2["canopy_02"]
        G3["ref_01_canopy_01"]
        G4["ref_01_canopy_02"]
    end

    subgraph PAIRS[VOD Pairs]
        P1["C1 vs Ref@C1"]
        P2["C2 vs Ref@C2"]
    end

    V1["VOD 1"]
    V2["VOD 2"]

    C1 --> C1P
    C2 --> C2P
    R1 --> R1C1
    R1 --> R1C2

    C1P --> G1
    C2P --> G2
    R1C1 --> G3
    R1C2 --> G4

    G1 --> P1
    G3 --> P1
    G2 --> P2
    G4 --> P2

    P1 --> V1
    P2 --> V2
