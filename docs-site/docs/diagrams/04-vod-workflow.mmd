sequenceDiagram
    participant User
    participant Pipeline as PipelineOrchestrator
    participant Store as GnssResearchSite
    participant VODCalc as VODCalculator
    participant Grid as HemiGrid
    participant Viz as Visualizer
    
    User->>Pipeline: calculate_vod("site", "canopy", "ref", date)
    
    Pipeline->>Store: Load canopy dataset
    Store-->>Pipeline: Canopy Dataset (Ï†, Î¸, SNR)
    
    Pipeline->>Store: Load reference dataset
    Store-->>Pipeline: Reference Dataset (Ï†, Î¸, SNR)
    
    Pipeline->>VODCalc: calculate(canopy_ds, ref_ds)
    
    VODCalc->>VODCalc: Apply Tau-Omega Model<br/>Ï„ = -ln(SNR_canopy/SNR_ref)
    
    VODCalc-->>Pipeline: VOD Dataset (Ï„ per sid, epoch)
    
    Pipeline->>Grid: assign_cells(vod_ds)
    Grid->>Grid: Map (Ï†,Î¸) â†’ cell_id
    Grid-->>Pipeline: Gridded VOD
    
    Pipeline->>Viz: plot_hemisphere(gridded_vod)
    Viz-->>User: ðŸ“Š 2D/3D Visualization
    
    Note over User,Viz: Complete VOD workflow<br/>from raw RINEX to visualization
