# =============================================================================
# Processing Configuration Template
# =============================================================================
# Copy this file to config/processing.yaml and customize for your setup
# Run: just config-init

# =============================================================================
# Metadata (Written to Processed Files)
# =============================================================================

metadata:
  author: Your Name
  email: your.email@example.com
  institution: Your Institution
  department: Your Department  # Optional
  research_group: Your Research Group  # Optional
  website: https://your-institution.edu  # Optional

# =============================================================================
# Credentials
# =============================================================================

credentials:
  # NASA Earthdata email for CDDIS FTP authentication (optional)
  # Register at: https://urs.earthdata.nasa.gov/users/new
  # If set: NASA CDDIS primary, ESA fallback
  # If not set: ESA only (no auth required)
  nasa_earthdata_acc_mail: null

# =============================================================================
# Auxiliary Data
# =============================================================================

aux_data:
  agency: COD              # Analysis center: COD, GFZ, IGS, ESA, etc.
  product_type: final      # final, rapid, ultra-rapid

  # FTP server selection:
  # - If nasa_earthdata_acc_mail is set: NASA primary, ESA fallback
  # - If nasa_earthdata_acc_mail is null: ESA only (no auth required)
  #
  # ESA server: ftp://gssc.esa.int/gnss (no auth, always available)
  # NASA server: ftp://gdc.cddis.eosdis.nasa.gov (requires Earthdata account)

# =============================================================================
# Processing Parameters
# =============================================================================

processing:
  time_aggregation_seconds: 5
  n_max_threads: 20
  keep_rnx_vars:
    - SNR

  # GLONASS FDMA band aggregation
  # true: Treat all GLONASS FDMA bands as one band
  # false: Treat each GLONASS FDMA band individually
  aggregate_glonass_fdma: true

# =============================================================================
# Compression
# =============================================================================

compression:
  zlib: true
  complevel: 5

# =============================================================================
# Icechunk Storage
# =============================================================================

icechunk:
  compression_level: 5
  compression_algorithm: zstd  # zstd, lz4, gzip
  inline_threshold: 512
  get_concurrency: 1

  chunk_strategies:
    rinex_store:
      epoch: 34560  # 2 days of 5s data
      sid: -1       # Don't chunk along sid
    vod_store:
      epoch: 34560
      sid: -1

# =============================================================================
# Storage Strategies
# =============================================================================

storage:
  # Root directory for all IceChunk stores
  # Stores will be organized as: {stores_root_dir}/{site_name}/{rinex_store_name}/
  #                              {stores_root_dir}/{site_name}/{vod_store_name}/
  stores_root_dir: /path/to/your/gnss/stores

  # Custom store directory names (default: "rinex" and "vod")
  # rinex_store_name: rinex
  # vod_store_name: vod

  # Directory for auxiliary data caches (SP3/CLK Zarr files)
  # If not set, uses system temp directory
  # aux_data_dir: /path/to/aux_cache

  rinex_store_strategy: skip      # skip, overwrite, append
  rinex_store_expire_days: 2
  vod_store_strategy: overwrite

# =============================================================================
# Logging
# =============================================================================

logging:
  # Directory for log files. If not set, defaults to .logs/ in monorepo root
  # log_dir: /path/to/logs
  log_file_name: canvodpy.log
  log_path_depth: 6              # Path components shown in log references
