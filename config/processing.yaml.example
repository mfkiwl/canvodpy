# =============================================================================
# Processing Configuration Template
# =============================================================================
# Copy this file to config/processing.yaml and customize for your setup
# Run: canvodpy config init

# =============================================================================
# Metadata (Written to Processed Files)
# =============================================================================

metadata:
  author: Your Name
  email: your.email@example.com
  institution: Your Institution
  department: Your Department  # Optional
  research_group: Your Research Group  # Optional
  website: https://your-institution.edu  # Optional

# =============================================================================
# Credentials & Paths - CONFIGURED IN .env FILE
# =============================================================================
# Credentials (CDDIS_MAIL, GNSS_ROOT_DIR) are configured in .env file
# NOT in this YAML file!
#
# Create a .env file in the project root:
#   cp .env.example .env
#
# Then edit .env with your actual values:
#   CDDIS_MAIL=your.email@example.com      # Optional (enables NASA CDDIS)
#   GNSS_ROOT_DIR=/path/to/your/gnss/data  # Required
#
# See .env.example for detailed documentation

# =============================================================================
# Auxiliary Data
# =============================================================================

aux_data:
  agency: COD              # Analysis center: COD, GFZ, IGS, ESA, etc.
  product_type: final      # final, rapid, ultra-rapid

  # FTP server selection (configured via .env file):
  # - If CDDIS_MAIL set in .env: NASA primary, ESA fallback
  # - If CDDIS_MAIL not set: ESA only (no auth required)
  #
  # ESA server: ftp://gssc.esa.int/gnss (no auth, always available)
  # NASA server: ftp://gdc.cddis.eosdis.nasa.gov (requires CDDIS_MAIL in .env)

# =============================================================================
# Processing Parameters
# =============================================================================

processing:
  time_aggregation_seconds: 5
  n_max_threads: 20
  keep_rnx_vars:
    - SNR

  # GLONASS FDMA band aggregation
  # true: Treat all GLONASS FDMA bands as one band
  # false: Treat each GLONASS FDMA band individually
  aggregate_glonass_fdma: true

# =============================================================================
# Compression
# =============================================================================

compression:
  zlib: true
  complevel: 5

# =============================================================================
# Icechunk Storage
# =============================================================================

icechunk:
  compression_level: 5
  compression_algorithm: zstd  # zstd, lz4, gzip
  inline_threshold: 512
  get_concurrency: 1

  chunk_strategies:
    rinex_store:
      epoch: 34560  # 2 days of 5s data
      sid: -1       # Don't chunk along sid
    vod_store:
      epoch: 34560
      sid: -1

# =============================================================================
# Storage Strategies
# =============================================================================

storage:
  # Root directory for all IceChunk stores
  # Stores will be organized as: {stores_root_dir}/{site_name}/rinex/
  #                              {stores_root_dir}/{site_name}/vod/
  stores_root_dir: /path/to/your/gnss/stores

  rinex_store_strategy: skip      # skip, overwrite, append
  rinex_store_expire_days: 2
  vod_store_strategy: overwrite
